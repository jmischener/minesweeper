(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{82:function(e,a,t){},88:function(e,a,t){},91:function(e,a,t){},92:function(e,a,t){},93:function(e,a,t){},95:function(e,a,t){},96:function(e,a,t){},97:function(e,a,t){"use strict";t.r(a);var n,r,s=t(0),c=t(10),o=t.n(c),i=(t(82),t(15)),d=t(46),u=t(29),l=t(62),b=t(18);!function(e){e[e.Clean=0]="Clean",e[e.InGame=1]="InGame",e[e.Lose=2]="Lose",e[e.Win=3]="Win"}(n||(n={})),function(e){e[e.Hidden=0]="Hidden",e[e.Show=1]="Show",e[e.Flag=2]="Flag",e[e.Question=3]="Question"}(r||(r={}));var j="New Board",m="The End",h="Update Board",p="The Champion",f=function(){return{board:{squares:[],size:0},data:{step:n.Clean,cantBombs:0,cantFlags:0,cantShow:0}}},O=Object(u.combineReducers)({game:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f(),a=arguments.length>1?arguments[1]:void 0;switch(a.type){case j:return Object(b.a)(Object(b.a)({},e),{},{board:{size:a.payload.board.size,squares:Object(d.a)(a.payload.board.squares)},data:{step:a.payload.data.step,cantBombs:a.payload.data.cantBombs,cantFlags:a.payload.data.cantFlags,cantShow:a.payload.data.cantShow}});case m:return Object(b.a)(Object(b.a)({},e),{},{board:{squares:a.payload.board.squares,size:e.board.size},data:{step:n.Lose,cantBombs:e.data.cantBombs,cantFlags:e.data.cantFlags,cantShow:e.data.cantShow}});case p:return Object(b.a)(Object(b.a)({},e),{},{board:{squares:a.payload.board.squares,size:e.board.size},data:{step:n.Win,cantBombs:a.payload.data.cantBombs,cantFlags:a.payload.data.cantFlags,cantShow:a.payload.data.cantShow}});case h:return Object(b.a)(Object(b.a)({},e),{},{board:{squares:a.payload.board.squares,size:e.board.size},data:{step:e.data.step,cantBombs:a.payload.data.cantBombs,cantFlags:a.payload.data.cantFlags,cantShow:a.payload.data.cantShow}});default:return Object(b.a)({},e)}}}),v=Object(u.createStore)(O,g(),Object(l.composeWithDevTools)());function g(){try{var e=localStorage.getItem("minesweeper");return null===e?{game:f()}:JSON.parse(e)}catch(a){return f()}}v.subscribe((function(){switch(v.getState().game.data.step){case n.Clean:case n.InGame:localStorage.setItem("minesweeper",JSON.stringify(v.getState()));break;case n.Lose:case n.Win:localStorage.removeItem("minesweeper")}localStorage.setItem("minesweeper",JSON.stringify(v.getState()))}));var y=function(e,a){var t=Array.from({length:e*e},(function(){return{isBomb:!1,state:r.Hidden,value:0}}));if(e<=0||a<=0)throw new Error("Valores incorrectos");if(a>e*e/2)throw new Error("Demasiadas bombas");for(var n=0;n<a;n++){var s=Math.round(Math.random()*(e*e-1));t[s].isBomb?n--:w(t,e,s)}return t},w=function(e,a,t){e[t].isBomb=!0,t>=a&&(e[t-a].value++,(t-a)%a!==0&&e[t-a-1].value++,(t-a)%a!==a-1&&e[t-a+1].value++),t%a!==0&&e[t-1].value++,t%a!==a-1&&e[t+1].value++,t+a<a*a&&(e[t+a].value++,(t+a)%a!==0&&e[t+a-1].value++,(t+a)%a!==a-1&&e[t+a+1].value++)},x=function(){var e=[],a=0,t=0;function n(s){e[s].state===r.Hidden&&(e[s].state=r.Show,t++,0===e[s].value&&(s>=a&&(n(s-a),(s-a)%a!==0&&n(s-a-1),(s-a)%a!==a-1&&n(s-a+1)),s%a!==0&&n(s-1),s%a!==a-1&&n(s+1),s+a<a*a&&(n(s+a),(s+a)%a!==0&&n(s+a-1),(s+a)%a!==a-1&&n(s+a+1))))}return{around:function(r,s,c){return e=r,a=s,t=0,n(c),t}}}(),S=t(63),B=t.n(S),z=t(68),F=t.n(z),C=(t(88),t(6)),I=function(e){var a=Object(i.b)(),t=e.index,s=Object(i.c)((function(e){return e.game.data.step})),c=Object(i.c)((function(e){return e.game.board.squares[t]})),o=function(e){a(function(e,a){var t=g().game,n=t.board.squares,s=t.data;if(a===r.Show&&n[e].isBomb)return n[e].state=a,{type:m,payload:{board:{squares:n},data:s}};switch(a){case r.Show:var c;c=x.around(n,t.board.size,e),s.cantShow-=c;break;case r.Flag:s.cantFlags+=1,n[e].state=a;break;case r.Hidden:case r.Question:n[e].state=a}return 0===s.cantShow?{type:p,payload:{board:{squares:n},data:s}}:{type:h,payload:{board:{squares:n},data:s}}}(t,e))};return Object(C.jsx)("div",{className:"box".concat(c.state," ").concat(s===n.InGame&&c.state!==r.Show?"enabled":""),onClick:function(e){s===n.InGame&&c.state!==r.Show&&c.state!==r.Flag&&o(r.Show)},onAuxClick:function(e){!function(){if(s===n.InGame)switch(c.state){case r.Flag:o(r.Question);break;case r.Question:o(r.Hidden);break;case r.Hidden:o(r.Flag)}}()},children:function(){switch(c.state){case r.Flag:return Object(C.jsx)(B.a,{style:{fontSize:25},color:"secondary"});case r.Question:return Object(C.jsx)("span",{children:"?"});case r.Show:return c.isBomb?Object(C.jsx)(F.a,{style:{fontSize:25}}):0===c.value?Object(C.jsx)("span",{children:"\xa0"}):Object(C.jsx)("span",{className:"value".concat(c.value),children:c.value});default:return Object(C.jsx)("span",{children:"\xa0"})}}()})},q=(t(91),function(e){var a=e.size;return Object(C.jsx)("div",{className:"board",style:{gridTemplateColumns:"repeat(".concat(a,", 30px)")},onMouseDown:function(e){return e.preventDefault()},onContextMenu:function(e){return e.preventDefault()},children:a>0&&function(){for(var e=new Array(a*a),t=0;t<e.length;t++)e[t]=Object(C.jsx)(I,{index:t},t);return e}()})}),k=t(138),N=(t(92),function(e){var a=Object(i.c)((function(e){return e.game.data}));return Object(C.jsxs)("div",{style:{width:30*e.size+2},children:[Object(C.jsx)("div",{children:function(){switch(a.step){case n.Lose:return Object(C.jsx)(k.a,{severity:"error",children:"Perdiste!"});case n.Win:return Object(C.jsx)(k.a,{severity:"success",children:"Ganaste!"});default:return""}}()}),Object(C.jsx)("div",{children:Object(C.jsx)(k.a,{severity:"info",children:"Cantidad Bombas:".concat(a.cantBombs-a.cantFlags)})})]})}),G=t(36),H=t(132),L=t(140),D=t(133),Q=t(134),T=t(135),W=t(137),E=t(136),J=(t(93),function(){var e=Object(i.b)(),a=Object(s.useState)(!1),t=Object(G.a)(a,2),r=t[0],c=t[1],o=Object(s.useState)(0),u=Object(G.a)(o,2),l=u[0],b=u[1],m=Object(s.useState)(0),h=Object(G.a)(m,2),p=h[0],f=h[1],O=Object(s.useState)(!0),v=Object(G.a)(O,2),g=v[0],w=v[1];Object(s.useEffect)((function(){w(!(l>0&&p>0&&p<=l*l/2))}),[l,p]);var x=function(){c(!1)};return Object(C.jsxs)("div",{className:"root",children:[Object(C.jsx)(H.a,{variant:"outlined",color:"primary",onClick:function(){c(!0)},children:"Nueva Partida!"}),Object(C.jsxs)(L.a,{open:r,onClose:x,"aria-labelledby":"form-dialog-title",children:[Object(C.jsx)(D.a,{id:"form-dialog-title",children:"Nueva Partida"}),Object(C.jsxs)(Q.a,{children:[Object(C.jsx)(T.a,{children:"Defina el tama\xf1o del tablero y la cantidad de bombas"}),Object(C.jsx)(W.a,{id:"boardSize",label:"Tama\xf1o Tablero",type:"number",onChange:function(e){var a=Number.parseInt(e.target.value);b(a)},InputLabelProps:{shrink:!0}}),Object(C.jsx)(W.a,{id:"cantBombs",label:"Cantidad Bombas",type:"number",onChange:function(e){!function(e){f(Number.parseInt(e.target.value))}(e)},InputLabelProps:{shrink:!0}})]}),Object(C.jsxs)(E.a,{children:[Object(C.jsx)(H.a,{onClick:x,color:"primary",children:"Cancelar"}),Object(C.jsx)(H.a,{onClick:function(){e(function(e,a){return{type:j,payload:{board:{size:e,squares:Object(d.a)(y(e,a))},data:{step:n.InGame,cantBombs:a,cantFlags:0,cantShow:e*e-a}}}}(l,p)),c(!1)},color:"primary",disabled:g,children:"Iniciar"})]})]})]})}),P=(t(95),function(){var e=Object(i.c)((function(e){return e.game.board}));return Object(C.jsxs)("div",{children:[Object(C.jsx)(J,{}),Object(C.jsx)(N,{size:e.size}),Object(C.jsx)(q,{size:e.size})]})}),M=(t(96),function(){return Object(C.jsx)(i.a,{store:v,children:Object(C.jsx)(P,{})})});o.a.render(Object(C.jsx)(M,{}),document.getElementById("root"))}},[[97,1,2]]]);
//# sourceMappingURL=main.9ad4c7df.chunk.js.map